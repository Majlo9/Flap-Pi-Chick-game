<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flappy Chicken Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
    #startButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      font-size: 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <button id="startButton" onclick="startGame()">Start Game</button>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startButton = document.getElementById('startButton');
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let chickenX = 150;
    let chickenY = canvas.height / 2;
    let velocityY = 0;
    const gravity = 0.6;
    const jumpStrength = -12;
    let isJumping = false;

    // Trubky
    const pipeWidth = 60;
    const pipeGap = 250;
    let pipes = [];
    let score = 0;
    let isGameOver = false;
    let lastPipeTime = 0;

    // Funkce pro generování trubek
    function createPipe() {
      const pipeHeight = Math.floor(Math.random() * (canvas.height - pipeGap));
      pipes.push({ x: canvas.width, y: pipeHeight, passed: false });
    }

    // Funkce pro vykreslení trubek
    function drawPipes() {
      ctx.fillStyle = "#228B22"; // Zelené trubky
      pipes.forEach(pipe => {
        ctx.fillRect(pipe.x, 0, pipeWidth, pipe.y); // Horní trubka
        ctx.fillRect(pipe.x, pipe.y + pipeGap, pipeWidth, canvas.height - (pipe.y + pipeGap)); // Spodní trubka
      });
    }

    // Funkce pro vykreslení kuřete (fialové)
    function drawChicken() {
      ctx.fillStyle = "#800080"; // Fialové kuře
      ctx.beginPath();
      ctx.arc(chickenX, chickenY, 20, 0, Math.PI * 2); // Kuře je kreslené jako kruh
      ctx.fill();
      ctx.fillStyle = "#FFFF00"; // Žluté π uprostřed
      ctx.beginPath();
      ctx.arc(chickenX, chickenY, 10, 0, Math.PI * 2); // Uvnitř kuřete žlutý kruh
      ctx.fill();
    }

    // Funkce pro vykreslení pozadí (ptáci, stromy, domy)
    function drawBackground() {
      ctx.fillStyle = "#87CEEB"; // Nebe
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Vykreslíme ptáky (5 ptáků ve hře)
      for (let i = 0; i < 5; i++) {
        const birdX = Math.random() * canvas.width;
        const birdY = Math.random() * (canvas.height / 2);
        ctx.fillStyle = "#FFD700"; // Zlatí ptáci
        ctx.beginPath();
        ctx.arc(birdX, birdY, 15, 0, Math.PI * 2); // Pták jako malý kruh
        ctx.fill();
      }

      // Vykreslíme stromy (3 stromy ve hře)
      for (let i = 0; i < 3; i++) {
        const treeX = i * 300 + Math.random() * 100;
        const treeY = canvas.height - 100;

        // Kmen stromu (obdélník)
        ctx.fillStyle = "#8B4513"; // Hnědý kmen
        ctx.fillRect(treeX + 20, treeY - 100, 20, 100); // Kmen stromu (obdélník)

        // Koruna stromu (trojúhelník)
        ctx.fillStyle = "#006400"; // Tmavě zelená koruna stromu
        ctx.beginPath();
        ctx.moveTo(treeX, treeY - 100); // Levý dolní roh
        ctx.lineTo(treeX + 50, treeY - 200); // Špička koruny
        ctx.lineTo(treeX + 100, treeY - 100); // Pravý dolní roh
        ctx.closePath();
        ctx.fill();
      }

      // Vykreslíme domy (2 domy ve hře)
      for (let i = 0; i < 2; i++) {
        const houseX = i * 500 + Math.random() * 100;
        const houseY = canvas.height - 150;

        // Tělo domu (obdélník)
        ctx.fillStyle = "#8B4513"; // Hnědý dům
        ctx.fillRect(houseX, houseY, 100, 100); // Dům jako obdélník

        // Střecha domu (trojúhelník)
        ctx.fillStyle = "#A52A2A"; // Střecha jako hnědá
        ctx.beginPath();
        ctx.moveTo(houseX, houseY); // Levý dolní roh
        ctx.lineTo(houseX + 50, houseY - 50); // Špička střechy
        ctx.lineTo(houseX + 100, houseY); // Pravý dolní roh
        ctx.closePath();
        ctx.fill();
      }
    }

    // Funkce pro skok
    function jump() {
      if (!isJumping) {
        velocityY = jumpStrength;
        isJumping = true;
      }
    }

    // Funkce pro aktualizaci pohybu kuřete
    function updateChicken() {
      velocityY += gravity; // Gravitace
      chickenY += velocityY;

      if (chickenY + 20 > canvas.height) {
        chickenY = canvas.height - 20; // Kuře spadne na zem
        velocityY = 0;
        isJumping = false;
      }

      if (chickenY - 20 < 0) {
        chickenY = 20; // Kuře nevyletí mimo obrazovku
      }
    }

    // Funkce pro aktualizaci trubek
    function updatePipes() {
      const currentTime = Date.now();
      if (currentTime - lastPipeTime > 2000) {
        createPipe();
        lastPipeTime = currentTime;
      }

      for (let i = 0; i < pipes.length; i++) {
        pipes[i].x -= 3; // Trubky se pohybují doprava

        // Detekce skóre
        if (pipes[i].x + pipeWidth < chickenX && !pipes[i].passed) {
          pipes[i].passed = true;
          score++;
        }

        if (pipes[i].x + pipeWidth < 0) {
          pipes.splice(i, 1); // Odstraní trubku, pokud opustila obrazovku
        }
      }
    }

    // Funkce pro detekci kolize
    function checkCollisions() {
      pipes.forEach(pipe => {
        if (chickenX + 20 > pipe.x && chickenX - 20 < pipe.x + pipeWidth) {
          if (chickenY - 20 < pipe.y || chickenY + 20 > pipe.y + pipeGap) {
            isGameOver = true; // Kolize
          }
        }
      });
    }

    // Funkce pro vykreslení skóre
    function drawScore() {
      ctx.fillStyle = "#000000";
      ctx.font = "30px Arial";
      ctx.fillText("Skóre: " + score, 20, 40);
    }

    // Funkce pro vykreslení tlačítka Start
    function showStartButton() {
      startButton.style.display = 'block'; // Ukáže tlačítko pro restart hry
    }

    // Funkce pro start hry
    function startGame() {
      isGameOver = false;
      score = 0;
      pipes = [];
      chickenY = canvas.height / 2;
      velocityY = 0;
      lastPipeTime = 0;
      isJumping = false;

      startButton.style.display = 'none'; // Skryje tlačítko Start

      setInterval(() => {
        if (!isGameOver) {
          update();
        }
      }, 1000 / 60); // 60 FPS
    }

    // Funkce pro vykreslení celé hry
    function draw() {
      if (isGameOver) {
        ctx.fillStyle = "rgba(0, 0, 0, 0.5)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#FFFFFF";
        ctx.font = "40px Arial";
        ctx.fillText("Konec hry!", canvas.width / 2 - 100, canvas.height / 2);
        ctx.fillText("Skóre: " + score, canvas.width / 2 - 60, canvas.height / 2 + 50);
        showStartButton(); // Zobrazí tlačítko pro restart
        return;
      }

      drawBackground(); // Vykreslíme pozadí
      drawPipes(); // Vykreslíme trubky
      drawChicken(); // Vykreslíme kuře
      drawScore(); // Vykreslíme skóre
    }

    // Funkce pro aktualizaci hry
    function update() {
      if (isGameOver) return;

      updateChicken(); // Aktualizace kuřete
      updatePipes(); // Aktualizace trubek
      checkCollisions(); // Kontrola kolizí
      draw(); // Vykreslení celé hry
    }

    // Ovládání skoků
    document.addEventListener('keydown', (e) => {
      if (e.key === " " || e.key === "ArrowUp") {
        jump();
      }
    });
  </script>
</body>
</html>
